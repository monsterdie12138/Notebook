
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://monsterdie12138.github.io/Notebook/Computer%20Science/System3/Chapter7/">
      
      
        <link rel="prev" href="../Chapter6/">
      
      
        <link rel="next" href="../Chapter8/">
      
      
      <link rel="icon" href="../../../stylesheets/logo.jpg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>7.File System Implementation - Monsterdie's Notebook</title>
      
    
    
  
      <link rel="stylesheet" href="../../../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    

    

      
    
<script>
    MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
    };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>

    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Serif+SC:300,300i,400,400i,700,700i%7CSource+Code+Pro:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Noto Serif SC";--md-code-font:"Source Code Pro"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-J49VTEQR8G"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-J49VTEQR8G",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-J49VTEQR8G",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="deep-purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#chapter7-file-system-implementation" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="Monsterdie&#39;s Notebook" class="md-header__button md-logo" aria-label="Monsterdie's Notebook" data-md-component="logo">
      
  <img src="../../../stylesheets/logo.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Monsterdie's Notebook
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              7.File System Implementation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="deep-purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="deep-purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/monsterdie12138/Notebook" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Monsterdie's Notebook
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Mathematics/" class="md-tabs__link">
          
  
  Mathematics

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  Computer Science

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Course/" class="md-tabs__link">
          
  
  Course

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Monsterdie&#39;s Notebook" class="md-nav__button md-logo" aria-label="Monsterdie's Notebook" data-md-component="logo">
      
  <img src="../../../stylesheets/logo.jpg" alt="logo">

    </a>
    Monsterdie's Notebook
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/monsterdie12138/Notebook" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Monsterdie's Notebook
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../Mathematics/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Mathematics
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Computer Science
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Computer Science
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../FPA/Chapter1/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    程序设计与算法基础
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../FDS/Chapter1/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    数据结构基础
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../ADS/Chapter1/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    高级数据结构与算法分析
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../AID/Chapter1/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    人工智能引论
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../System1/Chapter1/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    计算机系统Ⅰ
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../System2/Chapter1/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    计算机系统Ⅱ
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" checked>
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    计算机系统Ⅲ
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            计算机系统Ⅲ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapter1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.Fundamentals of Quantitative Design and Analysis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapter2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.ILP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapter3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.Memory Hierarchy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapter4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.Main Memory
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapter5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.Virtual Memory
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapter6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.File System Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    7.File System Implementation
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapter8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8.Mass Storage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapter9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.IO
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapter10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10.DLP and SIMD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapter11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11.TLP and MIMD
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../DB/Chapter1/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    数据库系统
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../Course/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Course
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<p><span style="font-family: 'Times New Roman';"></p>
<h1 id="chapter7-file-system-implementation">Chapter7 File System Implementation</h1>
<hr />
<p><strong>File System Structure:</strong></p>
<ul>
<li>
<p>磁盘中的结构：</p>
<ul>
<li><strong>boot control block</strong>: 存储OS引导信息，通常位于卷的第一个block，仅当卷包含OS镜像时才需要</li>
<li><strong>volume control block (superblock)</strong>: 存储文件系统级别的信息，如block的数量，空闲block的数量，block的大小，空闲FCB的数量等</li>
<li><strong>directory structure</strong>: 每一个目录都会维护其下文件名与inode的映射关系，所有映射关系组成文件系统级别的目录结构</li>
<li><strong>file control block (FCB)</strong>: 存储文件的元数据，在Unix/Linux系统中又称为<strong>inode</strong></li>
</ul>
</li>
<li>
<p>内存中的结构：</p>
<ul>
<li><strong>mount table</strong>: 记录不同文件系统的挂载点、类型等信息</li>
<li><strong>system-wide open-file table</strong>: 对于要打开的文件，操作这个文件时需要把磁盘上对应的FCB加载到内存来更新，如果系统运行时操作很多文件，那么可以把这些文件的FCB放到这张表上便于操作</li>
<li><strong>per-process open-file table</strong>: 不同进程操作同一文件时，FCB只有一个，但进程需要维护额外信息，例如file offset（指针）等，就存在这张表中</li>
<li><strong>IO memory buffer</strong></li>
</ul>
</li>
</ul>
<p>使用文件系统时，磁盘上的结构会映射到内存中，注意mount table只存在于内存中，因为它是一个使用时概念。</p>
<p>$~$</p>
<p><strong>File Control Block (FCB):</strong></p>
<p><img alt="alt text" src="../image/7.1.png" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>一个文件系统能存多少文件不仅受到物理空间的限制，还受到FCB数量的限制。</p>
</div>
<p>$~$</p>
<p><strong>Create Operation:</strong></p>
<p>首先，在磁盘上分配一个inode。</p>
<p>然后，将文件名与inode进行映射，放到目录结构中。</p>
<p>$~$</p>
<p><strong>Open Operation:</strong></p>
<p>打开文件时，OS得到的是一个路径。首先，OS去这个路径下找到这个文件，遍历system-wide open-file table检查这个文件是否已经被打开。</p>
<p>如果已经被打开，那么在当前进程的per-process open-file table中创建一个新的entry，并保存指向system-wide open-file table中对应entry的指针。</p>
<p>否则，先要将文件的inode加载到system-wide open-file table中。</p>
<p>然后，更新system-wide open-file table中的inode信息，如打开计数等。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>一个进程如果关掉文件，那么per-process open-file table中的entry会被删除，system-wide open-file table中的inode中的打开计数会减1。<br />
如果所有进程都关掉这个文件，那么system-wide open-file table中的inode会被写回磁盘并被删除。</p>
</div>
<p><img alt="alt text" src="../image/7.2.png" /></p>
<p>一个inode中的指针有的直接指向data block，有的指向其他区域，这些区域中仍然是指针，指向data block或者下一层的指针，这种多级指针的实现能支持更大的文件。</p>
<p><img alt="alt text" src="../image/7.3.png" /></p>
<p>$~$</p>
<p><strong>Directory Implementation:</strong></p>
<ul>
<li>线性链表：顺序存储文件名+指向inode的指针</li>
<li>哈希表：利用哈希函数计算文件名的哈希值，查表得到映射到的inode序号</li>
</ul>
<p>$~$</p>
<p><strong>Disk Block Allocation-Contiguous Allocation:</strong></p>
<p><img alt="alt text" src="../image/7.4.png" /></p>
<p>文件的所有data block连续。</p>
<p>优点：实现简单，只需要记录起始位置和长度。<br />
缺点：不够灵活，文件大小如果改变会比较麻烦；外部碎片化；需要定期整理出空闲空间（compaction）</p>
<p>有一些文件系统使用<strong>extent-based contiguous allocation</strong>，即将文件分成多个extent，每个extent包含的一系列block是连续的，但是extent之间不一定相邻。</p>
<p>$~$</p>
<p><strong>Disk Block Allocation-Linked Allocation:</strong></p>
<p><img alt="alt text" src="../image/7.5.png" /></p>
<p>文件需要的data block不需要连续，而是用链表链接起来，文件的每个data block中存储下一个block的地址。</p>
<p>优点：没有外部碎片化；不需要定期整理空闲空间。<br />
缺点：磁盘寻址和IO操作频繁；指针需要额外存储空间。</p>
<p>$~$</p>
<p><strong>Disk Block Allocation-Indexed Allocation:</strong></p>
<p><img alt="alt text" src="../image/7.6.png" /></p>
<p>每个文件都有对应的index block，index block中存储指向所有data block的指针。</p>
<p>优点：没有外部碎片化；支持随机访问。<br />
缺点：index block需要额外存储空间（文件很小时比较明显）。</p>
<p>索引也可以多级，类似于之前的inode多级指针。</p>
<p><img alt="alt text" src="../image/7.7.png" /></p>
<p>$~$</p>
<p><strong>Bitmap:</strong></p>
<p>每个bit表达一个block的使用情况，0表示空闲，1表示占用。</p>
<p>优点：容易找到连续的空闲空间。<br />
缺点：需要额外存储空间。</p>
<p>例如：一个block的大小为$4\text{KB}=2^{12}\text{B}$，整个磁盘的大小为$2^{40}\text{B}$，那么磁盘上有$2^{40}/2^{12}=2^{28}$个block。如果bitmap上每一个bit表示一个cluster，每一个cluster由4个block组成，那么需要$2^{28}/4=2^{26}$个bit来表示整个磁盘的空闲空间，即bitmap的大小为$8\text{MB}$。</p>
<p>$~$</p>
<p><strong>Linked Free Space:</strong></p>
<p>用链表连接每一个空闲block。</p>
<p>优点：不需要额外存储空间，因为指针可以存储在每个block中。<br />
缺点：难以得到连续的空闲空间。</p>
<p><img alt="alt text" src="../image/7.8.png" /></p>
<p>$~$</p>
<p><strong>Grouping and Counting:</strong></p>
<p>如果在使用链表的情况下寻找可用块，需要遍历链表，而由于指针存放在每个block中，可能会导致频繁的磁盘IO操作。</p>
<p>因此，grouping使用<strong>index block</strong>加以改进。index block中存储一组空闲block的地址和指向下一个index block的指针，这样寻找多个空闲block时不需要遍历整个链表。</p>
<p>此外，针对链表难以得到连续空闲空间的缺点，counting使用<strong>cluster</strong>加以改进。每一个链表节点记录首个空闲block的地址和后面连续的空闲block的数量，这样一组连续的空闲block称为一个cluster。</p>
<p>$~$</p>
<p><strong>Recovery:</strong></p>
<ul>
<li>backup</li>
<li><strong>log-structured file system (LSFS)</strong>: 更新被写入循环日志（circular log）中，一旦写入循环日志就表示已提交；但是日志并不是最终存储数据的位置，系统会定期重放（replay），将更新实际作用到对应的存储位置，然后将相应日志移除</li>
</ul>
<p>$~$</p>
<p><strong>Example:</strong></p>
<p>假设我们有64个block，每个block的大小为4KB：</p>
<p><img alt="alt text" src="../image/7.9.png" /></p>
<p>其中，我们使用54个block存储实际的数据：</p>
<p><img alt="alt text" src="../image/7.10.png" /></p>
<p>再使用5个block存储inode。假设一个inode的大小为256B，则一共可以有80个inode，对应80个文件：</p>
<p><img alt="alt text" src="../image/7.11.png" /></p>
<p>再使用bitmap来管理空闲的block。inode block的bitmap和data block的bitmap分开来各占用一个block：</p>
<p><img alt="alt text" src="../image/7.12.png" /></p>
<p>最后，使用一个block来存储superblock，存储内容包括inode的数量、data block的数量、inode block的起始位置、data block的起始位置、magic number等：</p>
<p><img alt="alt text" src="../image/7.13.png" /></p>
<p>每一个inode都有一个编号（inumber），例如，当我们需要寻找编号为32的inode时，首先有32*sizeof(inode)=8KB，然后就可以计算地址为4KB(superblock)+8KB(inode block)+8KB(32个inode)=20KB：</p>
<p><img alt="alt text" src="../image/7.14.png" /></p>
<p>$~$</p>
<p><strong>Read /foo/bar:</strong></p>
<p><img alt="alt text" src="../image/7.15.png" /></p>
<p>首先进行open操作。读取根目录的inode，得到根目录的data block；根目录的data block中有foo目录和其inode的映射关系，因此可以找到foo目录的inode，得到foo目录的data block；foo目录的data block中有bar文件和其inode的映射关系，因此可以找到bar文件的inode。</p>
<p>然后进行read操作。读取bar文件的inode，得到bar文件的第一个data block并读取；然后对bar文件的inode进行修改，更新其访问时间等元数据。bar文件的其他data block同理。</p>
<p>$~$</p>
<p><strong>Write /foo/bar:</strong> </p>
<p><img alt="alt text" src="../image/7.16.png" /></p>
<p>此处假设bar文件还不在磁盘上。</p>
<p>首先进行create操作。同样地，从根目录的inode一直读到foo目录的data block，发现foo目录中没有bar文件的inode映射，因此需要创建。</p>
<p>此时需要从inode bitmap中找到一个空闲inode，更新inode bitmap，并将bar文件与新创建的inode的映射关系写入foo目录的data block中。</p>
<p>bar文件的inode要更新bar文件的元数据，因此进行读写（不知道为什么这里除了写还要读）；由于foo目录的data block进行了更新，因此也要更新foo目录的inode。</p>
<p>之后进行write操作。与read操作不同之处在于，需要读写data bitmap，因为要分配空闲的data block。</p>
<p>$~$</p>
<p><strong>Crash Scenario:</strong></p>
<p>bitmap (B), inode (I), data block (D)写入磁盘的时间和空间都不一致，crash时会有不同的情况。</p>
<p>case1：只有D写回。</p>
<p>从文件系统一致性的角度来看，由于inode和bitmap没有更新，因此磁盘上的元数据依然反映旧的状态。这意味着文件系统认为该文件的相关信息仍未发生改变，因此不会自相矛盾。</p>
<p>但是从用户的角度来看，由于元数据没有更新，用户无法通过正常的文件访问手段看到或读取到这部分新修改的数据。用户对文件状态的感知并没有改变，感觉数据“丢失”了。</p>
<p>case2：只有I写回。</p>
<p>inode显示文件应该有新数据，但实际读取到的数据并不正确。</p>
<p>bitmap和inode的信息不一致，bitmap认为data block未被使用，而inode则认为其“拥有”它。后续分配data block可能会错误地将其分配给其他文件，导致数据覆盖和损坏。</p>
<p>case3：只有B写回。</p>
<p>bitmap认为data block已被使用，但实际上并没有任何文件拥有它，因为inode没有更新。所以这会导致空间泄漏（space leak）。</p>
<p>case4：I和B写回。</p>
<p>元数据指向的是错误数据（garbage data）。</p>
<p>case5：I和D写回。</p>
<p>同样有不一致的问题。</p>
<p>case6：B和D写回。</p>
<p>不知道data block属于哪一个文件。</p>
<p>$~$</p>
<p><strong>Data Journaling:</strong></p>
<p>假设要写的内容有I[v2]、B[v2]和Db，我们先将变更写入日志（磁盘单独分配出来的一块区域），事务开头为TxB，事务结尾为TxE。当日志全部安全存入磁盘后，再将变更写到磁盘的实际位置，这也就是检查点的效果。</p>
<p>综上：整体分为<strong>journal write</strong>和<strong>checkpoint</strong>两个阶段。</p>
<p><img alt="alt text" src="../image/7.17.png" /></p>
<p>这样可以保证一致性。因为如果写回磁盘的时候（checkpoint）发生crash，还可以通过日志重写。</p>
<p>但是，如果是写日志的时候（journal write）发生crash应该怎么办？</p>
<p>实际上，TxE可以作为一个事务提交的标志，只有TxE写入磁盘后，才认为事务提交成功。一个不完整的事务是不会被执行的，这也能保证一致性。</p>
<p>综上：整体分为<strong>journal write</strong>、<strong>journal commit</strong>和<strong>checkpoint</strong>三个阶段。</p>
<p><img alt="alt text" src="../image/7.18.png" /></p>
<p>如果日志写满了怎么办？</p>
<p>使用<strong>circular log</strong>，即日志区域到底后再从头寻找。日志也有对应的superblock，当一个检查点过后，会将已经完成的事务释放，方式是更新日志的superblock。</p>
<p>综上：整体分为<strong>journal write</strong>、<strong>journal commit</strong>、<strong>checkpoint</strong>和<strong>free</strong>四个阶段。</p>
<p><img alt="alt text" src="../image/7.19.png" /></p>
<p>我们发现同一个数据会写两遍，一次是到日志中，还有一次是到磁盘的实际位置。能否进行优化？</p>
<p>实际上，data block可以不需要日志，直接写到磁盘的实际位置。</p>
<p>综上：整体分为<strong>data write</strong>、<strong>journal metadata write</strong>、<strong>journal commit</strong>、<strong>checkpoint metadata</strong>和<strong>free</strong>五个阶段。</p>
<p><img alt="alt text" src="../image/7.21.png" /></p>
<p>1处crash没问题，因为元数据没有更新，充其量只是写了一些garbage data而已。</p>
<p>2处crash没问题，因为还没有提交，所以仍然保证一致性。</p>
<p>3处crash没问题，因为可以通过日志重写元数据。</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p><strong>The file system begins in an empty state, with just a root directory. As the simulation takes place, various operations are performed, thus slowly changing the on-disk state of the file system.</strong></p>
<p><strong>The possible operations are:</strong></p>
<ul>
<li><strong><code>mkdir()</code>-creates a new directory</strong></li>
<li><strong><code>create()</code>-creates a new(empty) file</strong></li>
<li><strong><code>open()</code>, <code>write()</code>, <code>close()</code>-appends a block to a file</strong></li>
<li><strong><code>link()</code>-creates a hard link to a file</strong></li>
<li><strong><code>unlink()</code>-unlinks a file(removing it if linkcnt==0)</strong></li>
</ul>
<p><strong>The inodes each have three fields: the first field indicates the type of file(f for regular file, d for directory); the second indicates which data block belongs to a file(here, files can only be empty, which would have the address of the data block set to -1, or one block in size, which would have a non-negative address); the third shows the reference count for the file or directory. For example, the following inode is a regular file, which is empty(address field set to -1), and has just one link in the file system:</strong></p>
<p><code>[f a:-1 r:1]</code></p>
<p><strong>If the same file had a block allocated to it(say block 10), it would be shown as follows:</strong></p>
<p><code>[f a:10 r:1]</code></p>
<p><strong>If someone then created a hard link to this inode, it would then become:</strong></p>
<p><code>[f a:10 r:2]</code></p>
<p><strong>Finally, data blocks can either retain user data or directory data. If filled with directory data, each entry within the block is of the form (name, inumber), where "name" is the name of the file or directory, and "inumber" is the inode number of the file. Thus, an empty root directory looks like this:</strong></p>
<p><code>[(.,0)(..,0)]</code></p>
<p><strong>If we add a single file "f" to the root directory, which has been allocated inode number 1, the root directory contents would then become:</strong></p>
<p><code>[(.,0)(..,0)(f,1)]</code></p>
<p><strong>If a data block contains user data, it is shown as just a single character within the block, e.g., "h". If it is empty and unallocated, just a pair of empty brackets ([]) are shown.</strong></p>
<p><strong>An entire file system is thus depicted as follows:</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>inode bitmap 11110000
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>inodes      [d a:0 r:6] [f a:1 r:1] [f a:-1 r:1] [d a:2 r:2] [] ...
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>data bitmap 11100000
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>data        [(.,0)(..,0)(y,1)(z,2)(f,3)] [u] [(.,3)(..,0)] [] ...
</span></code></pre></div>
<p><strong>The file system has eight inodes and eight data blocks.</strong></p>
<p><strong>The root directory contains three entries(other than "." or ".."), to "y", "z" and "f". By looking up inode 1, we can see that "y" is a regular file(type f), with a single data block allocated to it(address 1). In that data block 1 are the contents of the file "y": namely, "u". We can also see that "f"(inode number 3) is a directory, also empty. You can see from the bitmaps that the first four inode bitmap entries are marked as allocated, as well as the first three data bitmap entries.</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>Initlal state
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>inode bitmap 10000000
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>inodes [d a:0 r:2] [] [] [] [] [] [] []
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>data bitmap 10000000
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>data [(.0)(..,0)] [] [] [] [] [] [] []
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>create(&quot;/y&quot;);
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>inode bitmap 11000000
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>inodes [d a:0 r:2] [f a:-1 r:1] [] [] [] [] [] []
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>data bitmap 10000000
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>data [(.0)(..,0)(y,1)] [] [] [] [] [] [] []
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>fd=open(&quot;/y&quot;,O_WORONLY|O_APPEND);
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>write(fs,buf,BLOCKSIZE);
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>close(fd);
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>inode bitmap 11000000
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>inodes [d a:0 r:2] [f a:1 r:1] [] [] [] [] [] []
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>data bitmap 11000000
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>data [(.,0)(..,0)(y,1)] [u] [] [] [] [] [] []
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>link(&quot;/y&quot;,&quot;/m&quot;);
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>inode bitmap 11000000
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>inodes [d a:0 r:2] [f a:1 r:2] [] [] [] [] [] []
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>data bitmap 11000000
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>data [(.,0)(..,0)(y,1)(m,1)] [u] [] [] [] [] [] []
</span></code></pre></div>
<p><strong>Now, the question is:</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>What operations?
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>inode bitmap 11000000
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>inodes [d a:0 r:2] [f a:1 r:1] [] [] [] [] [] []
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>data bitmap 11000000
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>data [(.,0)(..,0)(y,1)] [u] [] [] [] [] [] []
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>What operations?
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>inode bitmap 11100000
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>inodes [d a:0 r:2] [f a:1 r:1] [f a:-1 r:1] [] [] [] [] []
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>data bitmap 11000000
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>data [(.,0)(..,0)(y,1)(z,2)] [u] [] [] [] [] [] []
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>What operations?
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>inode bitmap 11110000
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>inodes [d a:0 r:3] [f a:1 r:1] [f a:-1 r:1] [d a:2 r:2] [] [] [] []
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>data bitmap 11100000
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>data [(.,0)(..,0)(y,1)(z,2)(f,3)] [u] [(.,3)(..,0)] [] [] [] [] []
</span></code></pre></div>
<p>解答：</p>
<p>第一个操作：<code>unlink("/m")</code></p>
<p>第二个操作：<code>create("/z")</code></p>
<p>第三个操作：<code>mkdir("/f")</code></p>
</div>







  
  



  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              Thanks for your feedback! Help us improve this page by using our <a href="..." target="_blank" rel="noopener">feedback form</a>. 
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


  <h2 id="__comments">评论</h2>
  <!-- Insert generated snippet here -->
  <script src="https://giscus.app/client.js"
      data-repo="monsterdie12138/Notebook"
      data-repo-id="R_kgDOMQ832g"
      data-category="Announcements"
      data-category-id="DIC_kwDOMQ832s4CmZ2M"
      data-mapping="pathname"
      data-strict="0"
      data-reactions-enabled="1"
      data-emit-metadata="0"
      data-input-position="bottom"
      data-theme="preferred_color_scheme"
      data-lang="zh-CN"
      crossorigin="anonymous"
      async>
  </script>
  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate"
        ? "transparent_dark"
        : "light"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme) 
    }

    // Register event handlers after document loaded
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate"
            ? "transparent_dark"
            : "light"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>

                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../Chapter6/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 6.File System Interface">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                6.File System Interface
              </div>
            </div>
          </a>
        
        
          
          <a href="../Chapter8/" class="md-footer__link md-footer__link--next" aria-label="下一页: 8.Mass Storage">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                8.Mass Storage
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 - Now Monsterdie
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/monsterdie12138" target="_blank" rel="noopener" title="Writer on Github" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.path", "navigation.top", "navigation.footer", "navigation.prune", "search.suggest", "content.code.copy", "content.code.select", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  </body>
</html>